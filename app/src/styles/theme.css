/* Root theme variables */
:root {
  /* Base theme colors */
  --primary-color: #384959;
  --secondary-color: #6A89A7;
  --accent-color: #88BDF2;
  --background-color: #F8FAFD;

  /* Semantic color variants */
  --primary-text-color: var(--primary-color);
  --secondary-text-color: var(--secondary-color);
  --header-bg: var(--primary-color);
  --footer-bg: var(--primary-color);
  --sidebar-bg: var(--primary-color);
  --divider-color: var(--secondary-color);
  --inactive-color: var(--secondary-color);
  --button-bg: var(--accent-color);
  --link-color: var(--accent-color);
  --highlight-color: var(--accent-color);
  --background-card: var(--background-color);
  --hover-bg: rgba(136, 189, 242, 0.1);
  --text-light: #ffffff;
  --border-color: var(--secondary-color);

  /* Financial indicators */
  --success-color: #2ecc71;
  --warning-color: #f39c12;
  --error-color: var(--notification-badge-bg);

  /* Badge colors */
  --widget-color: #388e3c;
  --widget-bg: #e8f5e9;
  --workflow-color: #8f4700;
  --workflow-bg: #fff1e6;
  --theme-color: #0d47a1;
  --theme-bg: #e3f2fd;

  /* Notification badges */
  --notification-badge-bg: #e74c3c;
  --notification-badge-text: #ffffff;
  --new-badge-bg: #e74c3c;
  --new-badge-text: #ffffff;
  
  /* Explicitly set color-scheme for light mode */
  color-scheme: light;
}

/* Dark theme colors */
.dark-theme {
  /* Base theme colors - inverted */
  --primary-color: #1e2e3e;
  --secondary-color: #4a6885;
  --accent-color: #5a94d8;
  --background-color: #1a222e;

  /* Semantic color variants */
  --primary-text-color: #e0e6ed;
  --secondary-text-color: #a7c0db;
  --header-bg: #101820;
  --footer-bg: #101820;
  --sidebar-bg: #101820;
  --divider-color: #3a5675;
  --inactive-color: #567697;
  --button-bg: #5a94d8;
  --link-color: #88BDF2;
  --highlight-color: #88BDF2;
  --background-card: #243546;
  --hover-bg: rgba(136, 189, 242, 0.2);
  --text-light: #e7ecf1;
  --border-color: #3a5675;

  /* Financial indicators for dark theme */
  --success-color: #27ae60; 
  --warning-color: #e67e22;
  /* error-color inherits from notification-badge-bg */

  /* Badge colors for dark theme */
  --widget-color: #4caf50;
  --widget-bg: #1a2e1c;
  --workflow-color: #ffb74d;
  --workflow-bg: #2e251a;
  --theme-color: #64b5f6;
  --theme-bg: #1a2a3e;
  
  /* Explicitly set color-scheme for dark mode */
  color-scheme: dark;
}

/* System theme preference - auto dark theme */
body:not(.light-theme-forced):not(.dark-theme) {
  /* Apply dark theme automatically */
  --primary-color: #1e2e3e;
  --secondary-color: #4a6885;
  --accent-color: #5a94d8;
  --background-color: #1a222e;
  --primary-text-color: #e0e6ed;
  --secondary-text-color: #a7c0db;
  --header-bg: #101820;
  --footer-bg: #101820;
  --sidebar-bg: #101820;
  --divider-color: #3a5675;
  --inactive-color: #567697;
  --button-bg: #5a94d8;
  --link-color: #88BDF2;
  --highlight-color: #88BDF2;
  --background-card: #243546;
  --hover-bg: rgba(136, 189, 242, 0.2);
  --text-light: #e7ecf1;
  --border-color: #3a5675;
  --widget-color: #4caf50;
  --widget-bg: #1a2e1c;
  --workflow-color: #ffb74d;
  --workflow-bg: #2e251a;
  --theme-color: #64b5f6;
  --theme-bg: #1a2a3e;
  
  color-scheme: dark;
}

/* Forced light theme */
.light-theme-forced {
  /* Light theme variables remain as root */
  color-scheme: light !important;
}

/* Forced light theme elements */
.light-theme-forced * {
  color-scheme: light !important;
}

body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  color: var(--primary-text-color);
  transition: background-color 0.3s ease;
  background-color: var(--background-color);
}

/* System theme preference detection */
@media (prefers-color-scheme: dark) {
  /* Auto apply dark theme when system prefers dark */
  body:not(.light-theme-forced) {
    --primary-color: #1e2e3e;
    --secondary-color: #4a6885;
    --accent-color: #5a94d8;
    --background-color: #1a222e;
    --primary-text-color: #e0e6ed;
    --secondary-text-color: #a7c0db;
    --header-bg: #101820;
    --footer-bg: #101820;
    --sidebar-bg: #101820;
    --divider-color: #3a5675;
    --inactive-color: #567697;
    --button-bg: #5a94d8;
    --link-color: #88BDF2;
    --highlight-color: #88BDF2;
    --background-card: #243546;
    --hover-bg: rgba(136, 189, 242, 0.2);
    --text-light: #e7ecf1;
    --border-color: #3a5675;
    --widget-color: #4caf50;
    --widget-bg: #1a2e1c;
    --workflow-color: #ffb74d;
    --workflow-bg: #2e251a;
    --theme-color: #64b5f6;
    --theme-bg: #1a2a3e;
    
    color-scheme: dark;
  }
}

/* Webkit scrollbar styling */
::-webkit-scrollbar {
  width: 12px;
}

/* Light theme scrollbars */
::-webkit-scrollbar-track {
  background-color: #f0f0f0;
}

::-webkit-scrollbar-thumb {
  background-color: #c1c1c1;
  border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: #a8a8a8;
}

/* Dark theme scrollbars */
.dark-theme::-webkit-scrollbar-track {
  background-color: #1a222e;
}

.dark-theme::-webkit-scrollbar-thumb {
  background-color: #3a5675;
}

.dark-theme::-webkit-scrollbar-thumb:hover {
  background-color: #4a6885;
}

/* System preference dark scrollbars */
@media (prefers-color-scheme: dark) {
  body:not(.light-theme-forced)::-webkit-scrollbar-track {
    background-color: #1a222e;
  }
  
  body:not(.light-theme-forced)::-webkit-scrollbar-thumb {
    background-color: #3a5675;
  }
  
  body:not(.light-theme-forced)::-webkit-scrollbar-thumb:hover {
    background-color: #4a6885;
  }
}

/* Forced light theme scrollbars */
.light-theme-forced::-webkit-scrollbar-track {
  background-color: #f0f0f0 !important;
}

.light-theme-forced::-webkit-scrollbar-thumb {
  background-color: #c1c1c1 !important;
  border-radius: 5px !important;
}

.light-theme-forced::-webkit-scrollbar-thumb:hover {
  background-color: #a8a8a8 !important;
}

/* Firefox scrollbar styling */
* {
  scrollbar-width: thin;
  scrollbar-color: #c1c1c1 #f0f0f0; /* thumb track */
}

.dark-theme * {
  scrollbar-color: #3a5675 #1a222e !important; /* dark theme scrollbars */
}

@media (prefers-color-scheme: dark) {
  body:not(.light-theme-forced) * {
    scrollbar-color: #3a5675 #1a222e !important; /* system dark scrollbars */
  }
}

.light-theme-forced * {
  scrollbar-color: #c1c1c1 #f0f0f0 !important; /* forced light scrollbars */
}

/* ========== CHECKBOX STYLING ========== */

/* Base checkbox styling */
input[type="checkbox"] {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border: 1px solid #c1c1c1;  /* Default light border */
  border-radius: 3px;
  background-color: white;    /* Default light background */
  cursor: pointer;
  position: relative;
  display: inline-block;
  vertical-align: text-bottom;
  transition: all 0.2s ease;
}

/* Checkbox checked state */
input[type="checkbox"]:checked {
  background-color: var(--accent-color);  /* Use theme accent color */
  border-color: var(--accent-color);
}

/* Checkbox checkmark */
input[type="checkbox"]:checked::before {
  content: '\2713';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: white;
  font-size: 14px;
  font-weight: bold;
  line-height: 1;
}

/* Checkbox hover state */
input[type="checkbox"]:hover {
  border-color: var(--accent-color);
}

/* Dark theme checkbox styling */
.dark-theme input[type="checkbox"] {
  border-color: #567697;  /* Dark theme border */
  background-color: #243546;  /* Dark theme background */
}

.dark-theme input[type="checkbox"]:checked {
  background-color: var(--accent-color);
  border-color: var(--accent-color);
}

/* System preference dark theme checkbox styling */
@media (prefers-color-scheme: dark) {
  body:not(.light-theme-forced) input[type="checkbox"] {
    border-color: #567697;
    background-color: #243546;
  }
  
  body:not(.light-theme-forced) input[type="checkbox"]:checked {
    background-color: var(--accent-color);
    border-color: var(--accent-color);
  }
}

/* Forced light theme checkbox styling */
.light-theme-forced input[type="checkbox"] {
  border-color: #c1c1c1 !important;
  background-color: white !important;
}

.light-theme-forced input[type="checkbox"]:checked {
  background-color: var(--accent-color) !important;
  border-color: var(--accent-color) !important;
}