<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wallet Application</title>
  <!-- Load main.ts as early as possible -->
  <!-- <script type="module" src="./main.ts" async></script> -->
  <script type="importmap">
      {
        "imports": {
          "@microsoft/fast-element": "https://cdn.jsdelivr.net/npm/@microsoft/fast-element@2.1.0/+esm",
          "@chart/js": "https://cdn.jsdelivr.net/npm/chart.js@4.4.8/+esm",
          "@widgets/account": "/widgets/account-widget/account-widget.js",
          "@widgets/welcome": "/widgets/welcome/welcome-widget.js",
          "@widgets/swish": "/widgets/swish-widget.js",
          "@widgets/slow": "/widgets/slow-widget/slow-widget.js",
          "@widgets/error": "/widgets/error-widget/error-widget.js",
          "@widgets/financial-health": "/widgets/financial-health-widget/financial-health-widget.js",
          "@workflows/card": "/workflows/card/card-workflow.js",
          "@workflows/card-detail": "/workflows/card-detail/card-detail-workflow.js",
          "@workflows/transfer": "/workflows/transfer/transfer-workflow.js",
          "@workflows/loan": "/workflows/loan/loan-workflow.js",
          "@workflows/signing": "/workflows/signing/signing-workflow.js",
          "@workflows/create-account": "/workflows/create-account/create-account-workflow.js",
          "@workflows/swish-workflow": "/workflows/swish-workflow.js",
          "@workflows/account-info":  "/workflows/account-info/account-info-workflow.js",
          "@workflows/kyc": "/workflows/kyc/kyc-workflow.js",
          "@workflows/add-contact-workflow": "/workflows/payments/add-contact-workflow.js",
          "@pages/dashboard": "/pages/dashboard-page.js",
          "@pages/investments": "/pages/investments-page.js",
          "@pages/savings": "/pages/savings-page.js"
        }
      }
    </script>
  <style>
    :root {
      /* Base theme colors */
      --primary-color: #384959;
      --secondary-color: #6A89A7;
      --accent-color: #88BDF2;
      /* --background-color: #BDDDFC; */
      /* --background-color: #f5f5f5; */
      --background-color: #F8FAFD;

      /* Semantic color variants */
      --primary-text-color: var(--primary-color);
      --secondary-text-color: var(--secondary-color);
      --header-bg: var(--primary-color);
      --footer-bg: var(--primary-color);
      --sidebar-bg: var(--primary-color);
      --divider-color: var(--secondary-color);
      --inactive-color: var(--secondary-color);
      --button-bg: var(--accent-color);
      --link-color: var(--accent-color);
      --highlight-color: var(--accent-color);
      --background-card: var(--background-color);
      --hover-bg: rgba(136, 189, 242, 0.1);
      /* Based on accent color */
      --text-light: #ffffff;
      --border-color: var(--secondary-color);

      /* Badge colors - with text and background properly paired for contrast */
      --widget-color: #388e3c;
      --widget-bg: #e8f5e9;
      --workflow-color: #8f4700;
      --workflow-bg: #fff1e6;
      --theme-color: #0d47a1;
      --theme-bg: #e3f2fd;

      /* Notification badges */
      --notification-badge-bg: #e74c3c;
      --notification-badge-text: #ffffff;
      --new-badge-bg: #e74c3c;
      --new-badge-text: #ffffff;
    }

    /* Dark theme colors */
    .dark-theme {
      /* Base theme colors - inverted */
      --primary-color: #1e2e3e;
      --secondary-color: #4a6885;
      --accent-color: #5a94d8;
      --background-color: #1a222e;

      /* Semantic color variants */
      --primary-text-color: #e0e6ed;
      --secondary-text-color: #a7c0db;
      --header-bg: #101820;
      --footer-bg: #101820;
      --sidebar-bg: #101820;
      --divider-color: #3a5675;
      --inactive-color: #567697;
      --button-bg: #5a94d8;
      --link-color: #88BDF2;
      --highlight-color: #88BDF2;
      --background-card: #243546;
      --hover-bg: rgba(136, 189, 242, 0.2);
      --text-light: #e7ecf1;
      --border-color: #3a5675;

      /* Badge colors for dark theme */
      --widget-color: #4caf50;
      --widget-bg: #1a2e1c;
      --workflow-color: #ffb74d;
      --workflow-bg: #2e251a;
      --theme-color: #64b5f6;
      --theme-bg: #1a2a3e;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color: var(--primary-text-color);
      transition: background-color 0.3s ease;
      background-color: var(--background-color);
    }

    /* Improve sidebar styling */
    dream-sidebar {
      --sidebar-bg: var(--sidebar-bg);
      --text-color: var(--text-light);
      --border-color: var(--secondary-color);
      --hover-bg: var(--hover-bg);
    }

    /* System theme preference detection */
    @media (prefers-color-scheme: dark) {
      body:not(.light-theme-forced) {
        /* Apply dark theme by default when user prefers dark mode */
        background-color: var(--background-color);
      }

      body:not(.light-theme-forced):not(.dark-theme) {
        /* Apply dark theme automatically */
        --primary-color: #1e2e3e;
        --secondary-color: #4a6885;
        --accent-color: #5a94d8;
        --background-color: #1a222e;

        --primary-text-color: #e0e6ed;
        --secondary-text-color: #a7c0db;
        --header-bg: #101820;
        --footer-bg: #101820;
        --sidebar-bg: #101820;
        --divider-color: #3a5675;
        --inactive-color: #567697;
        --button-bg: #5a94d8;
        --link-color: #88BDF2;
        --highlight-color: #88BDF2;
        --background-card: #243546;
        --hover-bg: rgba(136, 189, 242, 0.2);
        --text-light: #e7ecf1;
        --border-color: #3a5675;

        --widget-color: #4caf50;
        --widget-bg: #1a2e1c;
        --workflow-color: #ffb74d;
        --workflow-bg: #2e251a;
        --theme-color: #64b5f6;
        --theme-bg: #1a2a3e;
      }
    }

    /* Initialize theme based on saved preference */
    :root {
      color-scheme: light dark;
    }
  </style>
</head>

<body>
  <!-- Set initial widgets directly in the HTML -->
  <dream-app></dream-app>

  <!-- Load widgets before main bundle -->
  <script async defer type="module" src="/main.js"></script>
</body>

</html>